(this["webpackJsonpdigital-trace-data"]=this["webpackJsonpdigital-trace-data"]||[]).push([[0],{39:function(e,t,n){},64:function(e,t,n){},83:function(e,t,n){"use strict";n.r(t);var i=n(2),s=n(1),a=n.n(s),c=n(20),o=n.n(c),r=(n(64),n(28)),d=n(29),l=n.n(d),u=n(33),h=n(24),j=n(25),b=n(21),m=n(27),p=n(26),v=n(56),O=n(6),g=n(43);n(84);g.a.initializeApp({apiKey:"AIzaSyBpxU23CO0qhSXEwhe0KimIDfEnvGZI4II",authDomain:"digital-traces-project.firebaseapp.com",projectId:"digital-traces-project",storageBucket:"digital-traces-project.appspot.com",messagingSenderId:"478692864215",appId:"1:478692864215:web:84c3ed0c74f8fdc51a8092",measurementId:"G-XP5P2PWSF3"});var x=g.a,f=n(36),w=n(32),y=(n(39),n(97)),k=n(30),S=n(48),_=n(23),C=function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(e){var i;Object(h.a)(this,n),(i=t.call(this,e)).state={positionList:[]},i.recordActivity=i.props.recordActivity;var s=x.firestore();return i.USER_DATA=s.collection("responseIDs").doc(i.props.qualtricsUserId),i.RESUME_CONTENT=s.collection("resume"),i.collapsibleOpened=i.collapsibleToggled.bind(Object(b.a)(i)),i.voteClick=i.voteClick.bind(Object(b.a)(i)),i}return Object(j.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.setState({studyVersion:this.props.studyVersion}),this.setState({resumeVersion:this.props.resumeVersion},(function(){1===e.state.resumeVersion?e.getResume1Values(e.displayValues):e.getResume2Values(e.displayValues)}))}},{key:"getResume1Values",value:function(e){var t=Math.random()<.5,n=Math.random()<.5,i=Math.random()<.5?"a":"b",s=Math.random()<.5?"a":"b",a=Math.random()<.5?"a":"b",c=Math.random()<.5;this.setState({isMan:t,isParent:n,education:i,work1:s,work2:a,isRemote:c},e),this.USER_DATA.set({}),this.USER_DATA.collection("values shown").doc("resume 1").set({isMan:t,isParent:n,education:i,work1:s,work2:a,isRemote:c})}},{key:"getResume2Values",value:function(e){var t=this;this.USER_DATA.collection("values shown").doc("resume 1").get().then((function(n){var i=n.data(),s=i.isMan,a=!i.isParent,c="a"===i.education?"b":"a",o="a"===i.work1?"b":"a",r="a"===i.work2?"b":"a",d=!i.isRemote;t.setState({isMan:s,isParent:a,education:c,work1:o,work2:r,isRemote:d},e),t.USER_DATA.collection("values shown").doc("resume 2").set({isMan:s,isParent:a,education:c,work1:o,work2:r,isRemote:d})}))}},{key:"displayValues",value:function(){var e=this;this.RESUME_CONTENT.doc("study2_location").get().then((function(t){e.setState({city:t.data().city})})),this.RESUME_CONTENT.doc("notes from initial phone screen").get().then((function(t){var n=(e.state.isParent?t.data().nonparent.toString():t.data().parent.toString()).split(".").map((function(e){return e.trim()})).filter(Boolean);e.setState({bulletList:n})})),this.RESUME_CONTENT.doc("education ".concat(this.state.education)).get().then((function(t){e.setState({degree:t.data().degree}),e.setState({duration:t.data().duration}),e.setState({major:t.data().major}),e.setState({university:t.data().university})})),this.RESUME_CONTENT.doc("work box 1".concat(this.state.work1)).get().then((function(t){e.addPositionToList(t.data())})),this.RESUME_CONTENT.doc("work box 2".concat(this.state.work1)).get().then((function(t){e.addPositionToList(t.data())}))}},{key:"collapsibleToggled",value:function(e){0===e?this.recordActivity("collapsibleToggled","education","toggled education section "):1===e&&this.recordActivity("collapsibleToggled","work","toggled work section ")}},{key:"voteClick",value:function(e){var t=this;this.setState(Object(w.a)({},e.target.name,!this.state[e.target.name]),(function(){t.state[e.target.name]?(t.recordActivity("click",e.target.name,"clicked ".concat(e.target.name," button")),"work1_up"===e.target.name?t.setState({work1_down:!1,work1_q:!1}):"work2_up"===e.target.name?t.setState({work2_down:!1,work2_q:!1}):"work3_up"===e.target.name?t.setState({work3_down:!1,work3_q:!1}):"work1_down"===e.target.name?t.setState({work1_up:!1,work1_q:!1}):"work2_down"===e.target.name?t.setState({work2_up:!1,work2_q:!1}):"work3_down"===e.target.name?t.setState({work3_up:!1,work3_q:!1}):"work1_q"===e.target.name?t.setState({work1_up:!1,work1_down:!1}):"work2_q"===e.target.name?t.setState({work2_up:!1,work2_down:!1}):"work3_q"===e.target.name?t.setState({work3_up:!1,work3_down:!1}):"education_down"===e.target.name?t.setState({education_up:!1,education_q:!1}):"education_up"===e.target.name?t.setState({education_down:!1,education_q:!1}):"education_q"===e.target.name?t.setState({education_up:!1,education_down:!1}):"notes_down"===e.target.name?t.setState({notes_up:!1,notes_q:!1}):"notes_up"===e.target.name?t.setState({notes_down:!1,notes_q:!1}):"notes_q"===e.target.name&&t.setState({notes_up:!1,notes_down:!1})):t.recordActivity("click",e.target.name,"un-clicked ".concat(e.target.name," button"))}))}},{key:"addPositionToList",value:function(e){this.setState((function(t){return{positionList:[].concat(Object(f.a)(t.positionList),[e])}}))}},{key:"_onMouseMove",value:function(e){this.recordActivity("mouse","(".concat(e.clientX,",").concat(e.clientY,")"),"moved mouse")}},{key:"render",value:function(){var e=this;return this.state.bulletList&&this.state.positionList.length>0?Object(i.jsx)("div",{className:"overall",children:Object(i.jsx)("div",{className:"App",onMouseMove:this._onMouseMove.bind(this),children:Object(i.jsx)("div",{className:"resume",children:Object(i.jsxs)("div",{children:[Object(i.jsx)("img",{className:"profile_image",src:A(this.state.isMan?"male_user":"female_user"),alt:"the candidate"}),Object(i.jsxs)("div",{className:"header",children:["Candidate ",1===this.state.resumeVersion?"A":"B"]}),Object(i.jsxs)("div",{className:"votingblock_notes",children:[Object(i.jsx)(T,{state:this.state,clickFunction:this.voteClick,sectionName:"notes"}),Object(i.jsxs)("div",{className:"notes",children:["Notes from Initial Phone Screen:",Object(i.jsx)("span",{id:"subtext_bullet",children:Object(i.jsxs)("ul",{children:[this.state.remoteNotesText&&Object(i.jsx)("li",{children:this.state.remoteNotesText}),this.state.bulletList.map((function(e,t){return Object(i.jsx)("li",{children:e},t)}))]})})]})]}),Object(i.jsxs)(k.a,{children:[Object(i.jsxs)(_.a,{children:[Object(i.jsx)(_.a.Header,{style:{background:"white",paddingLeft:0,paddingRight:0},children:Object(i.jsxs)(k.a.Toggle,{as:S.a,style:{color:"black",width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between",fontSize:"18px",alignItems:"center"},variant:"link",eventKey:"0",onClick:function(){return e.setState({educationSectionOpened:!e.state.educationSectionOpened},(function(){e.collapsibleToggled(0),e.state.educationSectionOpened&&e.setState({workSectionOpened:!1})}))},children:["Education"," ",Object(i.jsx)("img",{id:"toggle_icon",src:this.state.educationSectionOpened?A("minus_icon"):A("plus_icon"),alt:"toggle icon"})]})}),Object(i.jsx)(k.a.Collapse,{eventKey:"0",children:Object(i.jsx)(_.a.Body,{children:Object(i.jsxs)("div",{className:"votingblock",children:[Object(i.jsx)(T,{state:this.state,sectionName:"education"}),Object(i.jsxs)("div",{id:"subtext",children:[this.state.university,Object(i.jsxs)("div",{id:"subinfo",children:[this.state.degree,", ",this.state.major]}),Object(i.jsx)("div",{id:"subinfogray",children:this.state.duration})]})]})})})]}),Object(i.jsxs)(_.a,{children:[Object(i.jsx)(_.a.Header,{style:{background:"white",paddingLeft:0,paddingRight:0,borderTop:"1px solid black"},children:Object(i.jsxs)(k.a.Toggle,{as:S.a,style:{color:"black",width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between",fontSize:"18px",alignItems:"center"},variant:"link",eventKey:"1",onClick:function(){return e.setState({workSectionOpened:!e.state.workSectionOpened},(function(){e.collapsibleToggled(1),e.state.workSectionOpened&&e.setState({educationSectionOpened:!1})}))},children:["Work Experience ",Object(i.jsx)("img",{id:"toggle_icon",src:this.state.workSectionOpened?A("minus_icon"):A("plus_icon"),alt:"toggle icon"})]})}),Object(i.jsx)(k.a.Collapse,{eventKey:"1",children:Object(i.jsx)(_.a.Body,{children:this.state.positionList.map((function(t,n){return Object(i.jsxs)("div",{children:[Object(i.jsxs)("div",{className:"votingblock",children:[Object(i.jsx)(T,{state:e.state,clickFunction:e.voteClick,sectionName:"work".concat(n+1)}),Object(i.jsxs)("div",{id:"subtext",children:[" ",t.title,Object(i.jsxs)("div",{id:"horizontal",children:[Object(i.jsx)("div",{id:"subinfo",children:t.company}),2===e.state.studyVersion&&e.state.isRemote&&0===n&&Object(i.jsx)("div",{id:"subinfo",children:Object(i.jsx)("i",{children:"Remote"})}),2===e.state.studyVersion&&!e.state.isRemote&&0===n&&Object(i.jsx)("div",{id:"subinfo",children:Object(i.jsx)("i",{children:e.state.city})}),2===e.state.studyVersion&&0!==n&&Object(i.jsx)("div",{id:"subinfo",children:Object(i.jsx)("i",{children:e.state.city})})]}),Object(i.jsx)("div",{id:"subinfogray",children:t.duration}),Object(i.jsx)("div",{id:"subinfo",children:t.description})]})]}),Object(i.jsx)(y.a,{})]},n)}))})})]})]})]})})})}):Object(i.jsx)("h1",{children:"Loading..."})}}]),n}(a.a.Component);function A(e){return"".concat("/online-survey-digital-trace-data","/images/").concat(e,".png")}var T=function(e){var t=e.state,n=e.clickFunction,s=e.sectionName;return Object(i.jsxs)("div",{className:"vertical",children:[Object(i.jsx)("img",{name:"".concat(s,"_up"),src:t["".concat(s,"_up")]?A("upvote_selected"):A("upvote"),onClick:n,alt:"upvote"}),Object(i.jsx)("img",{name:"".concat(s,"_q"),src:t["".concat(s,"_q")]?A("circle_selected"):A("circle"),onClick:n,alt:"question mark"}),Object(i.jsx)("img",{name:"".concat(s,"_down"),src:t["".concat(s,"_down")]?A("downvote_selected"):A("downvote"),onClick:n,alt:"downvote"})]})},D=n(57);function E(){var e=Object(s.useState)([]),t=Object(D.a)(e,2),n=t[0],a=t[1],c=function(e,t){var s="/online-survey-digital-trace-data/#/".concat(e,"/").concat(t,"/0sampleResponseIDstudy").concat(e),c="".concat(e).concat(t),o=Object(i.jsx)("iframe",{height:"630px",width:"100%",src:s,title:c},c);a([].concat(Object(f.a)(n),[o]))};return Object(i.jsxs)("div",{className:"LandingPage container",children:[Object(i.jsx)("h1",{children:"Pretend this is the Qualtrics Survey"}),Object(i.jsx)("h2",{children:"You'll have some questions"}),Object(i.jsx)("p",{children:"And information and such"}),Object(i.jsx)("p",{children:"And then you can embed the Digital Trace Data page."}),Object(i.jsx)("p",{children:Object(i.jsx)("strong",{children:"TODO: these are based on the studyVersion in the code, which does not align to the DTD paper."})}),Object(i.jsx)("h2",{children:"Study 1"}),Object(i.jsx)("p",{children:"In Study 1, we are manipulating candidate gender and parenthood status."}),Object(i.jsx)("p",{children:"There are two resumes. Here's Candidate A."}),Object(i.jsx)("h3",{children:"First Resume"}),Object(i.jsx)("button",{onClick:function(){return c(1,1)},children:"Generate Candidate A resume"}),n.length>=1&&n[0],Object(i.jsx)("h3",{children:"Second Resume"}),Object(i.jsx)("p",{children:"And now Candidate B."}),Object(i.jsx)("button",{onClick:function(){return c(1,2)},children:"Generate Candidate A resume"}),n.length>=2&&n[1],Object(i.jsx)("h2",{children:"Study 2"}),Object(i.jsx)("p",{children:"In Study 2, we are additionally manipulating if the candidate has remote work experience."}),Object(i.jsx)("p",{children:"There are two resumes. Here's Candidate A."}),Object(i.jsx)("h3",{children:"First Resume"}),Object(i.jsx)("button",{onClick:function(){return c(2,1)},children:"Generate Candidate A resume"}),n.length>=3&&n[2],Object(i.jsx)("h3",{children:"Second Resume"}),Object(i.jsx)("p",{children:"And now Candidate B."}),Object(i.jsx)("button",{onClick:function(){return c(2,2)},children:"Generate Candidate A resume"}),n.length>=4&&n[3],Object(i.jsx)("h2",{children:"Downloading the Data"}),Object(i.jsxs)("p",{children:["Once you've run your study, you can download the data in CSV format at"," ",Object(i.jsx)("a",{href:"#/admin",children:"/admin"}),". In this demo, you can download the data no matter what password you put in."]})]})}var I=n(55),N=n.n(I),V=n(45),R=n.n(V),M=(n(53),function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(e){var i;Object(h.a)(this,n),(i=t.call(this,e)).state={showPasswordErrorMessage:!1,isAuthenticated:!1,typedText:"",userIDs:[],resumeCSVurl:null,activitiesCSVurl:null},i.DATABASE=x.firestore(),i.resumeContent=[],i.activityContent=[];var s=document.getElementById("root");return R.a.setAppElement(s),i}return Object(j.a)(n,[{key:"handleChange",value:function(e){this.setState({showPasswordErrorMessage:!1}),this.setState({typedText:e.target.value})}},{key:"submitPassword",value:function(){this.state.typedText,this.setState({isAuthenticated:!0}),this.fetchData()}},{key:"fetchData",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,n,i=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=null,t=["0sampleResponseIDstudy1","0sampleResponseIDstudy2"],e.next=9;break;case 5:return e.next=7,this.DATABASE.collection("responseIDs").get();case 7:n=e.sent,t=n.docs.map((function(e){return e.id}));case 9:t.length>0&&this.setState({userIDs:t},(function(){var e=t.map((function(e){return Promise.all([i.getResumeContent(e,1),i.getResumeContent(e,2)])}));Promise.all(e).then((function(){i.setState({resumeCSVurl:i.createCSV(i.resumeContent)})})).catch((function(e){console.error("Error fetching resumes:",e)}));var n=t.map((function(e){return Promise.all([i.getActivityContent(e,1),i.getActivityContent(e,2)])}));Promise.all(n).then((function(){i.setState({activitiesCSVurl:i.createCSV(i.activityContent)})})).catch((function(e){console.error("Error fetching activity:",e)}))}));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getResumeContent",value:function(e,t){var n=this;return this.DATABASE.collection("responseIDs").doc(e).collection("values shown").doc("resume ".concat(t)).get().then((function(i){i.exists?n.resumeContent.push(Object(r.a)({responseID:e,resumeNum:t},i.data())):console.log("No such document!")})).catch((function(e){console.error("Error getting document:",e)}))}},{key:"getActivityContent",value:function(e,t){var n=this;return this.DATABASE.collection("responseIDs").doc(e).collection("activityData_resume".concat(t)).get().then((function(i){i.forEach((function(i){n.activityContent.push(Object(r.a)({responseID:e,resumeNum:t,activityID:i.id},i.data()))}))}))}},{key:"createCSV",value:function(e){var t=N.a.unparse(e),n=new Blob([t],{type:"text/csv"});return URL.createObjectURL(n)}},{key:"render",value:function(){var e=this;return this.state.isAuthenticated?Object(i.jsx)("div",{className:"overall",children:Object(i.jsxs)("div",{className:"container",children:[Object(i.jsx)("div",{className:"title",children:"Download Data"}),!this.state.activitiesCSVurl&&!this.state.resumeCSVurl&&Object(i.jsx)("p",{children:"Processing..."}),this.state.activitiesCSVurl&&Object(i.jsx)("div",{className:"horizontal",id:"big",children:Object(i.jsx)("a",{href:this.state.activitiesCSVurl,download:"activity_data.csv",children:"Activity Data"})}),this.state.resumeCSVurl&&Object(i.jsx)("div",{className:"horizontal",id:"big",children:Object(i.jsx)("a",{href:this.state.resumeCSVurl,download:"resume_data.csv",children:"Resume Data"})})]})}):Object(i.jsx)(R.a,{className:"modal_dtp",isOpen:!this.state.isAuthenticated,children:Object(i.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e.submitPassword()},children:[Object(i.jsxs)("div",{children:[Object(i.jsx)("label",{htmlFor:"password",children:"Enter Password:"}),Object(i.jsx)("input",{type:"password",id:"password",onChange:this.handleChange.bind(this),value:this.state.typedText,autoFocus:!0}),Object(i.jsx)("button",{type:"submit",children:"Submit"})]}),this.state.showPasswordErrorMessage&&Object(i.jsx)("div",{id:"red",children:"Invalid password. Please re-enter."})]})})}}]),n}(a.a.Component)),q=M,P=n(78),U=function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(e){var i;Object(h.a)(this,n),(i=t.call(this,e)).activityCounter=1,i.recordActivity=i.recordActivity.bind(Object(b.a)(i)),i.DATABASE=x.firestore();var s=document.location.hash;return i.studyVersion=parseInt(s.split("/")[1]),i.resumeVersion=parseInt(s.split("/")[2]),i.qualtricsUserId=s.split("/")[3],console.log("qualtricsUserId: "+i.qualtricsUserId),i}return Object(j.a)(n,[{key:"recordActivity",value:function(){var e=Object(u.a)(l.a.mark((function e(t,n,i){var s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=this.activityCounter.toString().padStart(5,"0"),this.activityCounter=this.activityCounter+1,P(),console.log(s+" "+t+": "+n+" -- "+i);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,i){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.recordActivity("loading","accessed","App mounted")}},{key:"render",value:function(){var e=this;return Object(i.jsx)("div",{children:Object(i.jsxs)(v.a,{children:[Object(i.jsx)(O.a,{path:"/:studyVersion/:resumeVersion/:qualtricsUserId",render:function(t){return Object(i.jsx)(C,Object(r.a)(Object(r.a)({},t),{},{studyVersion:e.studyVersion,resumeVersion:e.resumeVersion,recordActivity:e.recordActivity,qualtricsUserId:e.qualtricsUserId}))}}),Object(i.jsx)(O.a,{path:"/admin",render:function(){return Object(i.jsx)(q,{})}}),Object(i.jsx)(O.a,{path:"/",exact:!0,render:function(){return Object(i.jsx)(E,{})}})]})})}}]),n}(a.a.Component);o.a.render(Object(i.jsx)(a.a.StrictMode,{children:Object(i.jsx)(U,{})}),document.getElementById("root"))}},[[83,1,2]]]);
//# sourceMappingURL=main.f6a2e03d.chunk.js.map