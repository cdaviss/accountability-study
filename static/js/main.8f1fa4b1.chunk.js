(this["webpackJsonpdigital-trace-data"]=this["webpackJsonpdigital-trace-data"]||[]).push([[0],{37:function(t,e,n){},63:function(t,e,n){},88:function(t,e,n){"use strict";n.r(e);var o=n(2),i=n(1),a=n.n(i),s=n(22),c=n.n(s),r=(n(63),n(41)),d=n(31),l=n.n(d),u=n(34),h=n(27),m=n(28),p=n(23),j=n(30),b=n(29),g=n(6),v=n(19),f=(n(37),n(102)),S=n(42);n(89);S.a.initializeApp({apiKey:"AIzaSyBpxU23CO0qhSXEwhe0KimIDfEnvGZI4II",authDomain:"digital-traces-project.firebaseapp.com",projectId:"digital-traces-project",storageBucket:"digital-traces-project.appspot.com",messagingSenderId:"478692864215",appId:"1:478692864215:web:84c3ed0c74f8fdc51a8092",measurementId:"G-XP5P2PWSF3"});var w=S.a,k=n(32),x=n(46),O=n(26),y=function(t){Object(j.a)(n,t);var e=Object(b.a)(n);function n(t){var o;return Object(h.a)(this,n),(o=e.call(this,t)).state={positionList:[]},o.qualtricsUserId=o.props.qualtricsUserId,o.recordActivity=o.props.recordActivity,o.collapsibleOpened=o.collapsibleToggled.bind(Object(p.a)(o)),o.voteClick=o.voteClick.bind(Object(p.a)(o)),o.mouseCounter=0,o}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var t=this;this.setState({studyVersion:this.props.studyVersion}),this.setState({resumeVersion:this.props.resumeVersion},(function(){1===t.state.resumeVersion&&t.selectValues(),t.populateValues()}))}},{key:"selectValues",value:function(){var t=this,e=w.firestore();e.collection("resume").doc("study2_location").get().then((function(e){t.setState({city:e.data().city})}));var n=Math.random();n<.5?e.collection("resume").doc("notes from initial phone screen").get().then((function(e){t.setState({remoteNotesText:e.data().not_working_remotely}),n=1})):e.collection("resume").doc("notes from initial phone screen").get().then((function(e){t.setState({remoteNotesText:e.data().working_remotely}),n=2}));var o=Math.random();o<.5?(this.setState({gender_icon:"male_user"}),o="man"):(this.setState({gender_icon:"female_user"}),o="woman");var i=Math.random();i<.5?(this.setState({parenthood:!0},(function(){e.collection("resume").doc("notes from initial phone screen").get().then((function(e){var n=e.data().parent.toString(),i=(n="man"===o?n.replace("[pronoun]","his"):n.replace("[pronoun]","her")).split(".");t.setState({bulletList:i})}))})),i=!0):(this.setState({parenthood:!1},(function(){e.collection("resume").doc("notes from initial phone screen").get().then((function(e){var n=e.data().nonparent.toString(),i=(n="man"===o?n.replace("[pronoun]","his"):n.replace("[pronoun]","her")).split(".");t.setState({bulletList:i})}))})),i=!1);var a=Math.random();a<.5?(this.setState({education:0},(function(){e.collection("resume").doc("education a").get().then((function(e){t.setState({degree:e.data().degree}),t.setState({distinction:e.data().distinction}),t.setState({duration:e.data().duration}),t.setState({major:e.data().major}),t.setState({university:e.data().university})}))})),a="a"):(this.setState({education:1},(function(){e.collection("resume").doc("education b").get().then((function(e){t.setState({degree:e.data().degree}),t.setState({distinction:e.data().distinction}),t.setState({duration:e.data().duration}),t.setState({major:e.data().major}),t.setState({university:e.data().university})}))})),a="b");var s=Math.random();s<.5?(this.setState({work1:0},(function(){e.collection("resume").doc("work box 1a").get().then((function(e){t.addPositionToList(e)}))})),s="a"):(this.setState({work1:1},(function(){e.collection("resume").doc("work box 1b").get().then((function(e){t.addPositionToList(e)}))})),s="b");var c=Math.random();c<.5?(this.setState({work2:0},(function(){e.collection("resume").doc("work box 2a").get().then((function(e){t.addPositionToList(e)}))})),c="a"):(this.setState({work2:1},(function(){e.collection("resume").doc("work box 2b").get().then((function(e){t.addPositionToList(e)}))})),c="b");var r=Math.random();2===this.state.studyVersion?r<.5?(this.setState({remote:!0}),r=!0):(this.setState({remote:!1}),r=!1):r=null,e.collection("responseIDs").doc(this.qualtricsUserId).collection("values shown").doc("resume 1").set({gender:o,parenthood:i,education:a,work1:s,work2:c,remote:r,remoteNotesText:n})}},{key:"populateValues",value:function(){var t=this,e=w.firestore();e.collection("resume").doc("study2_location").get().then((function(e){t.setState({city:e.data().city})})),e.collection("responseIDs").doc(this.qualtricsUserId).collection("values shown").doc("resume 1").get().then((function(n){var o=null,i=null,a=null,s=null,c=null,r=n.data();t.setState({remoteNotesText:r.remote_text_1}),"man"===r.gender?(t.setState({gender_icon:"man"}),o="man"):(t.setState({gender_icon:"woman"}),o="woman"),e.collection("resume").doc("notes from initial phone screen").get().then((function(e){var n=(!0===r.parenthood?e.data().nonparent.toString():e.data().parent.toString()).split(".").map((function(t){return t.trim()})).filter(Boolean);t.setState({bulletList:n})})),"a"===r.education?(e.collection("resume").doc("education b").get().then((function(e){t.setState({degree:e.data().degree}),t.setState({distinction:e.data().distinction}),t.setState({duration:e.data().duration}),t.setState({major:e.data().major}),t.setState({university:e.data().university})})),i="b"):(e.collection("resume").doc("education a").get().then((function(e){t.setState({degree:e.data().degree}),t.setState({distinction:e.data().distinction}),t.setState({duration:e.data().duration}),t.setState({major:e.data().major}),t.setState({university:e.data().university})})),i="a"),"a"===n.data().work1?(e.collection("resume").doc("work box 1b").get().then((function(e){t.addPositionToList(e)})),a="b"):(e.collection("resume").doc("work box 1a").get().then((function(e){t.addPositionToList(e)})),a="a"),"a"===n.data().work2?(e.collection("resume").doc("work box 2b").get().then((function(e){t.addPositionToList(e)})),s="b"):(e.collection("resume").doc("work box 2a").get().then((function(e){t.addPositionToList(e)})),s="a"),2===t.state.studyVersion&&(!0===n.data().remote?(t.setState({remote:!1}),c=!1):(t.setState({remote:!0}),c=!0)),e.collection("userIDs").doc(t.state.currentUserID).collection("values shown").doc("resume 2").set({gender:o,parenthood:!r.parenthood,education:i,work1:a,work2:s,work3:null,remote:c})}))}},{key:"collapsibleToggled",value:function(t){0===t?this.recordActivity("collapsibleToggled","education","toggled education section "):1===t&&this.recordActivity("collapsibleToggled","work","toggled work section ")}},{key:"voteClick",value:function(t){var e=this,n=w.firestore();this.activityCounter=this.activityCounter+1;var o=this.activityCounter.toString(),i=(new Date).toLocaleString("en-US",{hour12:!1});this.setState(Object(v.a)({},t.target.name,!this.state[t.target.name]),(function(){e.state[t.target.name]?(n.collection("studies").doc("study "+e.state.studyVersion).collection("userIDs").doc(e.state.currentUserID).collection("activityData_resume"+e.state.resumeVersion.toString()).doc(o).set({time:i,description:"clicked "+t.target.name+" button"}),"work1_up"===t.target.name?e.setState({work1_down:!1,work1_q:!1}):"work2_up"===t.target.name?e.setState({work2_down:!1,work2_q:!1}):"work3_up"===t.target.name?e.setState({work3_down:!1,work3_q:!1}):"work1_down"===t.target.name?e.setState({work1_up:!1,work1_q:!1}):"work2_down"===t.target.name?e.setState({work2_up:!1,work2_q:!1}):"work3_down"===t.target.name?e.setState({work3_up:!1,work3_q:!1}):"work1_q"===t.target.name?e.setState({work1_up:!1,work1_down:!1}):"work2_q"===t.target.name?e.setState({work2_up:!1,work2_down:!1}):"work3_q"===t.target.name?e.setState({work3_up:!1,work3_down:!1}):"education_down"===t.target.name?e.setState({education_up:!1,education_q:!1}):"education_up"===t.target.name?e.setState({education_down:!1,education_q:!1}):"education_q"===t.target.name?e.setState({education_up:!1,education_down:!1}):"notes_down"===t.target.name?e.setState({notes_up:!1,notes_q:!1}):"notes_up"===t.target.name?e.setState({notes_down:!1,notes_q:!1}):"notes_q"===t.target.name&&e.setState({notes_up:!1,notes_down:!1})):n.collection("studies").doc("study "+e.state.studyVersion).collection("userIDs").doc(e.state.currentUserID).collection("activityData_resume"+e.state.resumeVersion.toString()).doc(o).set({time:i,description:"unclicked "+t.target.name+" button"})}))}},{key:"addPositionToList",value:function(t){this.setState((function(e){return{positionList:[].concat(Object(g.a)(e.positionList),[t])}}))}},{key:"render",value:function(){var t=this;return this.state.bulletList&&this.state.positionList.length>0?Object(o.jsx)("div",{className:"overall",children:Object(o.jsx)("div",{className:"App",children:Object(o.jsx)("div",{className:"resume",children:Object(o.jsxs)("div",{children:[Object(o.jsx)("img",{className:"profile_image",src:_(this.state.gender_icon),alt:"the candidate"}),Object(o.jsxs)("div",{className:"header",children:["Candidate ",1===this.state.resumeVersion?"A":"B"]}),Object(o.jsxs)("div",{className:"votingblock_notes",children:[Object(o.jsx)(I,{state:this.state,clickFunction:this.voteClick,sectionName:"notes"}),Object(o.jsxs)("div",{className:"notes",children:["Notes from Initial Phone Screen:",Object(o.jsx)("span",{id:"subtext_bullet",children:Object(o.jsxs)("ul",{children:[this.state.remoteNotesText&&Object(o.jsx)("li",{children:this.state.remoteNotesText}),this.state.bulletList.map((function(t,e){return Object(o.jsx)("li",{children:t},e)}))]})})]})]}),Object(o.jsxs)(k.a,{children:[Object(o.jsxs)(O.a,{children:[Object(o.jsx)(O.a.Header,{style:{background:"white",paddingLeft:0,paddingRight:0},children:Object(o.jsxs)(k.a.Toggle,{as:x.a,style:{color:"black",width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between",fontSize:"18px",alignItems:"center"},variant:"link",eventKey:"0",onClick:function(){return t.setState({educationSectionOpened:!t.state.educationSectionOpened},(function(){t.collapsibleToggled(0),t.state.educationSectionOpened&&t.setState({workSectionOpened:!1})}))},children:["Education"," ",Object(o.jsx)("img",{id:"toggle_icon",src:this.state.educationSectionOpened?_("minus_icon"):_("plus_icon"),alt:"toggle icon"})]})}),Object(o.jsx)(k.a.Collapse,{eventKey:"0",children:Object(o.jsx)(O.a.Body,{children:Object(o.jsxs)("div",{className:"votingblock",children:[Object(o.jsx)(I,{state:this.state,sectionName:"education"}),Object(o.jsxs)("div",{id:"subtext",children:[this.state.university,Object(o.jsxs)("div",{id:"subinfo",children:[this.state.degree,", ",this.state.major]}),Object(o.jsx)("div",{id:"subinfogray",children:this.state.duration})]})]})})})]}),Object(o.jsxs)(O.a,{children:[Object(o.jsx)(O.a.Header,{style:{background:"white",paddingLeft:0,paddingRight:0,borderTop:"1px solid black"},children:Object(o.jsxs)(k.a.Toggle,{as:x.a,style:{color:"black",width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between",fontSize:"18px",alignItems:"center"},variant:"link",eventKey:"1",onClick:function(){return t.setState({workSectionOpened:!t.state.workSectionOpened},(function(){t.collapsibleToggled(1),t.state.workSectionOpened&&t.setState({educationSectionOpened:!1})}))},children:["Work Experience ",Object(o.jsx)("img",{id:"toggle_icon",src:this.state.workSectionOpened?_("minus_icon"):_("plus_icon"),alt:"toggle icon"})]})}),Object(o.jsx)(k.a.Collapse,{eventKey:"1",children:Object(o.jsx)(O.a.Body,{children:this.state.positionList.map((function(e,n){return Object(o.jsxs)("div",{children:[Object(o.jsxs)("div",{className:"votingblock",children:[Object(o.jsx)(I,{state:t.state,clickFunction:t.voteClick,sectionName:"work".concat(n+1)}),Object(o.jsxs)("div",{id:"subtext",children:[" ",e.data().title,Object(o.jsxs)("div",{id:"horizontal",children:[Object(o.jsx)("div",{id:"subinfo",children:e.data().company}),2===t.state.studyVersion&&t.state.remote&&0===n&&Object(o.jsx)("div",{id:"subinfo",children:Object(o.jsx)("i",{children:"Remote"})}),2===t.state.studyVersion&&!t.state.remote&&0===n&&Object(o.jsx)("div",{id:"subinfo",children:Object(o.jsx)("i",{children:t.state.city})}),2===t.state.studyVersion&&0!==n&&Object(o.jsx)("div",{id:"subinfo",children:Object(o.jsx)("i",{children:t.state.city})})]}),Object(o.jsx)("div",{id:"subinfogray",children:e.data().duration}),Object(o.jsx)("div",{id:"subinfo",children:e.data().description})]})]}),Object(o.jsx)(f.a,{})]},n)}))})})]})]})]})})})}):Object(o.jsx)("h1",{children:"Loading..."})}}]),n}(a.a.Component);function _(t){return"".concat("/online-survey-digital-trace-data","/images/").concat(t,".png")}var I=function(t){var e=t.state,n=t.clickFunction,i=t.sectionName;return Object(o.jsxs)("div",{className:"vertical",children:[Object(o.jsx)("img",{name:"".concat(i,"_up"),src:e["".concat(i,"_up")]?_("upvote_selected"):_("upvote"),onClick:n,alt:"upvote"}),Object(o.jsx)("img",{name:"".concat(i,"_q"),src:e["".concat(i,"_q")]?_("circle_selected"):_("circle"),onClick:n,alt:"question mark"}),Object(o.jsx)("img",{name:"".concat(i,"_down"),src:e["".concat(i,"_down")]?_("downvote_selected"):_("downvote"),onClick:n,alt:"downvote"})]})},q=n(56),V=n(7),C=(n(48),n(25)),T=n(55),D=n.n(T);n(80),a.a.Component;function A(t){t.props;return Object(o.jsxs)("div",{className:"LandingPage container",children:[Object(o.jsx)("h1",{children:"Pretend this is the Qualtrics Survey"}),Object(o.jsx)("h2",{children:"You'll have some questions"}),Object(o.jsx)("p",{children:"And information and such"}),Object(o.jsx)("p",{children:"And then you can embed the Digital Trace Data page."}),Object(o.jsx)("iframe",{height:"600px",width:"100%",src:"/online-survey-digital-trace-data/#/1/1/0sampleResponseID",title:"11"})]})}var L=n(83),N=function(t){Object(j.a)(n,t);var e=Object(b.a)(n);function n(t){var o;Object(h.a)(this,n),(o=e.call(this,t)).activityCounter=1,o.recordActivity=o.recordActivity.bind(Object(p.a)(o));var i=document.location.hash;return o.studyVersion=parseInt(i.split("/")[1]),o.resumeVersion=parseInt(i.split("/")[2]),o.qualtricsUserId=i.split("/")[3],console.log("qualtricsUserId: "+o.qualtricsUserId),o}return Object(m.a)(n,[{key:"recordActivity",value:function(){var t=Object(u.a)(l.a.mark((function t(e,n,o){var i,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=this.activityCounter.toString().padStart(5,"0"),this.activityCounter=this.activityCounter+1,a=L(),this.DATABASE&&this.DATABASE.collection("userIDs").doc(this.qualtricsUserId).collection("activityData_resume"+this.resumeVersion.toString()).doc(i).set({category:e,description:o,value:n,timestamp:new Date(a),timeEpoch:Number(a.format("x")),timeReadable:a.tz("America/Los_Angeles").format("M-D-YY h:mm:ssa")}),console.log(i+" "+e+": "+n+" -- "+o);case 5:case"end":return t.stop()}}),t,this)})));return function(e,n,o){return t.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.recordActivity("loading","accessed","App mounted")}},{key:"render",value:function(){var t=this;return Object(o.jsx)("div",{children:Object(o.jsxs)(q.a,{children:[Object(o.jsx)(V.a,{path:"/:studyVersion/:resumeVersion/:qualtricsUserId",render:function(e){return Object(o.jsx)(y,Object(r.a)(Object(r.a)({},e),{},{studyVersion:t.studyVersion,resumeVersion:t.resumeVersion,recordActivity:t.recordActivity,qualtricsUserId:t.qualtricsUserId}))}}),Object(o.jsx)(V.a,{path:"/",exact:!0,render:function(){return Object(o.jsx)(A,{})}})]})})}}]),n}(a.a.Component);c.a.render(Object(o.jsx)(a.a.StrictMode,{children:Object(o.jsx)(N,{})}),document.getElementById("root"))}},[[88,1,2]]]);
//# sourceMappingURL=main.8f1fa4b1.chunk.js.map